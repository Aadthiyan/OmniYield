"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{37269:function(e,t,a){a.d(t,{a:function(){return o}});var r=a(2265),i=a(24033),s=a(41711),n=a(66168);let o=()=>{let e=(0,i.useRouter)(),t=(0,s.oR)(e=>e.setUser),a=(0,s.oR)(e=>e.setWallet),o=(0,s.oR)(e=>e.setWalletConnected),l=(0,s.oR)(e=>e.addNotification),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),g=(0,r.useCallback)(async r=>{try{d(!0),p(null);let i=await n.E.login({email:r.email,password:r.password}),s={id:i.user.id.toString(),name:i.user.name,email:i.user.email,walletAddress:i.user.walletAddress,isActive:i.user.isActive,preferences:i.user.preferences,createdAt:i.user.createdAt,updatedAt:i.user.updatedAt};t(s),s.walletAddress&&(a({address:s.walletAddress,balance:"0",network:"ethereum",chainId:1,isConnected:!0}),o(!0)),l({type:"success",title:"Welcome back!",message:"Successfully logged in as ".concat(s.name),read:!1}),e.push("/dashboard")}catch(t){let e=t.message||"Login failed";p(e),l({type:"error",title:"Login Failed",message:e,read:!1})}finally{d(!1)}},[t,a,o,l,e]);return{login:g,signup:(0,r.useCallback)(async a=>{try{d(!0),p(null);let r=await n.E.signup({name:a.name,email:a.email,password:a.password}),i={id:r.user.id.toString(),name:r.user.name,email:r.user.email,walletAddress:r.user.walletAddress,isActive:r.user.isActive,preferences:r.user.preferences,createdAt:r.user.createdAt,updatedAt:r.user.updatedAt};t(i),l({type:"success",title:"Account Created",message:"Welcome to YieldX! Your account has been created.",read:!1}),e.push("/dashboard")}catch(t){let e=t.message||"Sign up failed";p(e),l({type:"error",title:"Sign Up Failed",message:e,read:!1})}finally{d(!1)}},[t,l,e]),connectWallet:(0,r.useCallback)(async(e,t)=>{try{d(!0),p(null),await n.E.connectWallet({walletAddress:e,signature:t}),a({address:e,balance:"0",network:"ethereum",chainId:1,isConnected:!0}),o(!0),l({type:"success",title:"Wallet Connected",message:"Connected wallet: ".concat(e.slice(0,6),"...").concat(e.slice(-4)),read:!1})}catch(t){let e=t.message||"Failed to connect wallet";p(e),l({type:"error",title:"Wallet Connection Failed",message:e,read:!1})}finally{d(!1)}},[a,o,l]),logout:(0,r.useCallback)(()=>{n.E.logout(),t(null),a(null),o(!1),e.push("/login"),l({type:"info",title:"Logged Out",message:"You have been successfully logged out.",read:!1})},[t,a,o,e,l]),isLoading:c,error:u}}},66168:function(e,t,a){a.d(t,{E:function(){return s}});var r=a(92173);class i{async healthCheck(){return(await this.api.get("/health")).data}async getStrategies(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=new URLSearchParams;return e&&a.append("network",e),t&&a.append("active_only","true"),(await this.api.get("/api/v1/yield/strategies?".concat(a))).data}async getStrategy(e){return(await this.api.get("/api/v1/yield/strategies/".concat(e))).data}async getYieldData(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,r=new URLSearchParams;return e&&r.append("strategy_id",e.toString()),t&&r.append("network",t),r.append("days",a.toString()),(await this.api.get("/api/v1/yield/yield-data?".concat(r))).data}async getTopYields(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,a=new URLSearchParams;return a.append("limit",e.toString()),t&&a.append("network",t),(await this.api.get("/api/v1/yield/top-yields?".concat(a))).data}async optimizeYield(e){return(await this.api.post("/api/v1/yield/optimize",e)).data}async rebalancePortfolio(e){return(await this.api.post("/api/v1/yield/rebalance",e)).data}async getUserAnalytics(e){return(await this.api.get("/api/v1/yield/analytics/user/".concat(e))).data}async getSystemAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return(await this.api.get("/api/v1/yield/analytics/system?days=".concat(e))).data}async getYieldTrends(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return(await this.api.get("/api/v1/yield/trends?days=".concat(e))).data}async refreshYieldData(){return(await this.api.post("/api/v1/yield/refresh-data")).data}async login(e){let t=await this.api.post("/api/auth/login",e);return t.data.accessToken&&(localStorage.setItem("authToken",t.data.accessToken),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data}async signup(e){let t=await this.api.post("/api/auth/signup",e);return t.data.accessToken&&(localStorage.setItem("authToken",t.data.accessToken),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data}async connectWallet(e){let t=await this.api.post("/api/auth/connect-wallet",e);return t.data.accessToken&&(localStorage.setItem("authToken",t.data.accessToken),localStorage.setItem("walletAddress",e.walletAddress)),t.data}logout(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("walletAddress"),delete this.api.defaults.headers.common.Authorization}getCurrentUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}getCurrentWallet(){return localStorage.getItem("walletAddress")}async getBridgeProtocol(){return(await this.api.get("/api/v1/bridge/protocol")).data}async initiateLockAndMint(e){return(await this.api.post("/api/v1/bridge/transfer/lock-and-mint",e)).data}async initiateBurnAndRelease(e){return(await this.api.post("/api/v1/bridge/transfer/burn-and-release",e)).data}async getTransferStatus(e){return(await this.api.get("/api/v1/bridge/transfer/status/".concat(e))).data}async validateTransferParameters(e){return(await this.api.post("/api/v1/bridge/validate",e)).data}handleError(e){if(e.response){var t,a;throw Error((null===(t=e.response.data)||void 0===t?void 0:t.message)||(null===(a=e.response.data)||void 0===a?void 0:a.error)||"Server error")}if(e.request)throw Error("Network error - please check your connection");throw Error(e.message||"An unexpected error occurred")}async get(e,t){try{return(await this.api.get(e,{params:t})).data}catch(e){this.handleError(e)}}async post(e,t){try{return(await this.api.post(e,t)).data}catch(e){this.handleError(e)}}async put(e,t){try{return(await this.api.put(e,t)).data}catch(e){this.handleError(e)}}async delete(e){try{return(await this.api.delete(e)).data}catch(e){this.handleError(e)}}constructor(){this.api=r.Z.create({baseURL:"http://localhost:8000",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Promise.reject(e)})}}let s=new i},41711:function(e,t,a){a.d(t,{oR:function(){return n}});var r=a(59115),i=a(74810);let s={user:null,wallet:null,isWalletConnected:!1,strategies:[],userStrategies:[],portfolioSummary:null,ui:{theme:"system",sidebarOpen:!0,loading:!1,error:null,notifications:[]},modal:{isOpen:!1,type:"connect-wallet",data:null},loading:{strategies:!1,portfolio:!1,wallet:!1,optimization:!1,rebalance:!1},error:null},n=(0,r.U)()((0,i.mW)((0,i.tJ)((e,t)=>({...s,setUser:t=>e({user:t}),setWallet:t=>e({wallet:t,isWalletConnected:!!t}),setWalletConnected:t=>e({isWalletConnected:t}),setStrategies:t=>e({strategies:t}),setUserStrategies:t=>e({userStrategies:t}),setPortfolioSummary:t=>e({portfolioSummary:t}),setUI:t=>e(e=>({ui:{...e.ui,...t}})),setModal:t=>e(e=>({modal:{...e.modal,...t}})),setLoading:(t,a)=>e(e=>({loading:{...e.loading,[t]:a}})),setError:t=>e({error:t}),addNotification:t=>e(e=>({ui:{...e.ui,notifications:[...e.ui.notifications,{...t,id:Date.now().toString(),timestamp:new Date().toISOString()}]}})),removeNotification:t=>e(e=>({ui:{...e.ui,notifications:e.ui.notifications.filter(e=>e.id!==t)}})),markNotificationAsRead:t=>e(e=>({ui:{...e.ui,notifications:e.ui.notifications.map(e=>e.id===t?{...e,read:!0}:e)}})),clearNotifications:()=>e(e=>({ui:{...e.ui,notifications:[]}})),updateUserPreferences:t=>e(e=>({user:e.user?{...e.user,preferences:{...e.user.preferences,...t}}:null})),switchNetwork:e=>{console.log("Switching to network:",e)},reset:()=>e(s)}),{name:"defi-yield-aggregator-store",partialize:e=>({user:e.user,ui:{theme:e.ui.theme,sidebarOpen:e.ui.sidebarOpen,loading:!1,error:null,notifications:[]}})}),{name:"defi-yield-aggregator"}))}}]);